#N canvas 221 70 630 646 10;
#X text 64 10 notes in;
#X text 158 60 parameters in;
#N canvas 692 79 545 499 Note_Manager 0;
#X obj 21 50 inlet _1;
#X obj 227 290 inlet _2;
#X obj 21 70 t l l;
#X obj 21 170 cyclone/gate;
#X obj 21 190 t l b;
#X obj 21 210 unpack;
#X obj 21 360 - 60;
#X obj 111 360 - 64;
#X obj 21 390 + 0;
#X obj 21 410 outlet _1;
#X obj 111 410 outlet _2;
#X text 21 430 pitch C3 = 0;
#X text 281 430 note on bang;
#X text 371 430 note on /off velocity;
#X obj 281 410 outlet _3;
#X obj 371 410 outlet _4;
#X text 21 450 NOTE ON ->;
#X text 371 470 NOTE ON/OFF;
#X obj 61 230 t f f;
#X obj 81 110 > 0;
#X obj 81 130 t f f;
#X obj 48 90 unpack;
#X obj 212 250 - 60;
#X obj 212 270 / 100;
#X obj 212 330 * 0;
#X obj 227 310 route Tune<Vel;
#X obj 388 330 outlet _5;
#X text 104 170 filters note ons;
#X text 371 450 note on = 1 \, note off = 0;
#X text 21 30 midi pitch and velocity pair;
#X text 21 10 Formats notes: scales pitch + vel;
#X text 213 230 microtonal tuning via velocity info;
#X text 388 310 other paramters;
#X text 111 430 velocity scaled [-63 - 64];
#X connect 0 0 2 0;
#X connect 1 0 25 0;
#X connect 2 0 3 1;
#X connect 2 1 21 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 14 0;
#X connect 5 0 6 0;
#X connect 5 1 18 0;
#X connect 6 0 8 0;
#X connect 7 0 10 0;
#X connect 8 0 9 0;
#X connect 18 0 7 0;
#X connect 18 1 22 0;
#X connect 19 0 20 0;
#X connect 20 0 3 0;
#X connect 20 1 15 0;
#X connect 21 1 19 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 8 1;
#X connect 25 0 24 1;
#X connect 25 1 26 0;
#X restore 61 100 pd Note_Manager;
#X obj 82 190 t f f f f;
#X obj 61 300 t f f f f;
#N canvas 29 88 850 521 Filter 0;
#X obj 21 50 inlet _1;
#X obj 91 490 outlet~ _1;
#X obj 361 490 outlet~ _2;
#X obj 81 50 inlet _2;
#X obj 91 120 inlet _3;
#X obj 271 70 inlet~ _4;
#X obj 281 410 inlet~ _5;
#X text 91 100 other paramters;
#X obj 751 210 outlet _3;
#X text 751 230 other paramters;
#X obj 361 410 inlet~ _6;
#X obj 91 140 route AFilterType AFreq AFreq<Key ARes AFreq<Vel AFreq<FEnv
AGain;
#X obj 81 70 t f f;
#X obj 271 90 cyclone/snapshot~ 10;
#X obj 388 70 line;
#X msg 388 50 2 \, 20 1000;
#X obj 271 110 t f f;
#X obj 141 180 t b f;
#X obj 141 210 expr $f1 * $f2 + $f3;
#X obj 191 180 t b f;
#X obj 141 240 expr $f1 + $f2 * $f3;
#X obj 291 210 t b f;
#X obj 60 270 expr $f1 + $f2;
#X obj 60 290 mtof;
#X obj 21 200 t b b b;
#X obj 40 220 0;
#X msg 21 400 clear;
#X obj 40 240 t f f;
#X obj 91 470 cyclone/biquad~ 1 0 0 0 0;
#X obj 91 440 cyclone/biquad~ 1 0 0 0 0;
#X obj 361 470 cyclone/biquad~ 1 0 0 0 0;
#X obj 361 440 cyclone/biquad~ 1 0 0 0 0;
#X obj 91 360 t a a;
#X text 21 30 pitch;
#X obj 271 270 *;
#X obj 531 180 t b f;
#X obj 531 210 expr $f1 * $f2 + $f3;
#X obj 581 180 t b f;
#X obj 531 240 expr $f1 + $f2 * $f3;
#X obj 681 210 t b f;
#X obj 450 270 expr $f1 + $f2;
#X obj 450 290 mtof;
#X obj 481 360 t a a;
#X obj 661 270 *;
#X obj 481 140 route BFilterType BFreq BFreq<Key BRes BFreq<FEnv BFreq<Vel
BGain;
#X text 21 10 Biquad filters;
#X text 281 390 audio left;
#X text 361 390 audio right;
#X text 431 410 filter B;
#X text 101 410 filter A;
#N canvas 692 249 450 300 filtergraph~ 0;
#X obj 23 36 inlet;
#X obj 73 36 inlet;
#X obj 123 36 inlet;
#X obj 173 36 inlet;
#X obj 223 36 inlet;
#X obj 273 36 inlet;
#X obj 323 36 inlet;
#X obj 373 36 inlet;
#X obj 23 126 outlet;
#X text 34 195 ver outro filtro para detalhes;
#X restore 481 340 pd filtergraph~;
#N canvas 692 249 450 300 filtergraph~ 0;
#X obj 23 36 inlet;
#X obj 73 36 inlet;
#X obj 123 36 inlet;
#X obj 173 36 inlet;
#X obj 223 36 inlet;
#X obj 273 36 inlet;
#X obj 323 36 inlet;
#X obj 373 36 inlet;
#X obj 23 126 outlet;
#X text 32 75 xxx nao hÃ¡ filtergraph para pd. substituir por ggee?
ou procurar outro modo?;
#X text 35 153 ver https://cycling74.com/forums/converting-pure-data-biquad-coefficients
para mais detalhes;
#X restore 91 340 pd filtergraph~;
#X obj 21 70 t b f f;
#X text 81 30 velocity;
#X text 271 50 Volume envelope;
#X connect 0 0 52 0;
#X connect 3 0 12 0;
#X connect 4 0 11 0;
#X connect 5 0 13 0;
#X connect 6 0 29 0;
#X connect 10 0 31 0;
#X connect 11 0 51 0;
#X connect 11 1 17 0;
#X connect 11 2 19 0;
#X connect 11 3 51 7;
#X connect 11 4 21 0;
#X connect 11 5 34 1;
#X connect 11 6 51 6;
#X connect 11 7 44 0;
#X connect 12 0 20 1;
#X connect 12 1 38 1;
#X connect 13 0 16 0;
#X connect 14 0 13 1;
#X connect 15 0 14 0;
#X connect 16 0 34 0;
#X connect 16 1 43 0;
#X connect 17 0 18 0;
#X connect 17 1 18 2;
#X connect 18 0 20 0;
#X connect 19 0 18 0;
#X connect 19 1 18 1;
#X connect 20 0 22 1;
#X connect 21 0 20 0;
#X connect 21 1 20 2;
#X connect 22 0 23 0;
#X connect 23 0 51 5;
#X connect 24 0 26 0;
#X connect 24 1 25 0;
#X connect 24 2 15 0;
#X connect 25 0 27 0;
#X connect 26 0 28 0;
#X connect 26 0 29 0;
#X connect 26 0 31 0;
#X connect 26 0 30 0;
#X connect 27 0 22 0;
#X connect 27 1 40 0;
#X connect 28 0 1 0;
#X connect 29 0 28 0;
#X connect 30 0 2 0;
#X connect 31 0 30 0;
#X connect 32 0 29 0;
#X connect 32 1 31 0;
#X connect 34 0 22 0;
#X connect 35 0 36 0;
#X connect 35 1 36 2;
#X connect 36 0 38 0;
#X connect 37 0 36 0;
#X connect 37 1 36 1;
#X connect 38 0 40 1;
#X connect 39 0 38 0;
#X connect 39 1 38 2;
#X connect 40 0 41 0;
#X connect 41 0 50 5;
#X connect 42 0 28 0;
#X connect 42 1 30 0;
#X connect 43 0 40 0;
#X connect 44 0 50 0;
#X connect 44 1 35 0;
#X connect 44 2 37 0;
#X connect 44 3 50 7;
#X connect 44 4 39 0;
#X connect 44 5 43 1;
#X connect 44 6 50 6;
#X connect 44 7 8 0;
#X connect 50 0 42 0;
#X connect 51 0 32 0;
#X connect 52 0 24 0;
#X connect 52 1 18 0;
#X connect 52 2 36 0;
#X restore 112 580 pd Filter;
#X obj 114 120 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#N canvas 210 186 938 419 Envelopes 0;
#X obj 42 110 inlet _1;
#X obj 236 260 outlet _2;
#X text 11 90 velocity scaled [-63 - 64];
#X obj 191 50 inlet _2;
#X obj 301 50 inlet _3;
#X obj 21 370 outlet~ _1;
#X obj 528 220 outlet~ _4;
#X obj 854 110 outlet _5;
#X text 131 30 note on = 1 \, note off = 0;
#X text 301 30 other paramters;
#X obj 301 70 route Vattack Vdecay Vsustain Vrelease;
#X obj 191 70 t f f;
#X obj 218 90 sel 1;
#X obj 191 120 t f f;
#N canvas 709 193 650 193 all_note_off_on_turning_device_on 0;
#X obj 21 50 inlet _1;
#X text 21 30 bang on note on;
#X text 131 30 release time;
#X text 241 30 all notes off;
#X obj 241 50 inlet _3;
#X obj 131 50 inlet _2;
#X obj 131 100 f;
#X text 21 70 on note on we resend release time;
#X obj 131 140 outlet _1;
#X text 131 160 release time;
#X obj 241 140 outlet _1;
#X text 241 160 note off;
#X obj 241 80 t b b;
#X obj 241 100 0;
#X obj 268 100 100;
#X text 291 70 first we set release time to 100 \, then we send a note
off msg to all ADSR generators;
#X text 21 10 aaa;
#X connect 0 0 6 0;
#X connect 4 0 12 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 10 0;
#X connect 14 0 8 0;
#X restore 288 140 pd all_note_off_on_turning_device_on;
#X obj 501 160 t f f;
#X obj 42 130 - 36;
#X obj 42 180 * 0;
#X obj 52 160 t b f;
#X obj 42 200 cyclone/dbtoa;
#X obj 21 350 *~ 0;
#X text 31 310 delays volume envelope by 256 samples. introduces latency
but sounds better because allows filter to be set up fine before audio
comes in....;
#X obj 21 270 *~;
#X obj 236 240 route mute;
#X obj 403 300 == 0;
#X text 834 130 other paramters;
#N canvas 839 394 502 287 adsr~ 0;
#X obj 16 53 inlet _1;
#X text 16 33 note on/off - 1/0;
#X text 136 33 attack (ms);
#X text 216 33 decay (ms);
#X text 296 33 sustain gain [0-1];
#X text 416 33 release (ms);
#X obj 136 53 inlet _2;
#X obj 216 53 inlet _3;
#X obj 296 53 inlet _4;
#X obj 416 53 inlet _5;
#X obj 36 243 outlet~ _1;
#X text 36 263 gain;
#X obj 156 243 outlet _2;
#X obj 36 223 vline~;
#X obj 16 73 sel 0 1;
#X obj 16 133 f;
#X obj 16 153 t f f;
#X msg 43 173 0 \$1;
#X obj 16 173 del;
#X obj 16 193 1;
#X msg 156 223 mute \$1;
#X obj 35 93 t b b;
#X obj 156 203 0;
#X obj 95 153 pack f f f f;
#X msg 95 173 1 \$2 \, \$4 \$3 \$2;
#X text 16 13 Implementation of adsr~ using vline~;
#X text 156 263 mute 0/1 (busy/free);
#X connect 0 0 14 0;
#X connect 6 0 23 1;
#X connect 7 0 23 2;
#X connect 8 0 23 3;
#X connect 9 0 15 1;
#X connect 13 0 10 0;
#X connect 14 0 15 0;
#X connect 14 1 21 0;
#X connect 15 0 16 0;
#X connect 16 0 18 0;
#X connect 16 1 17 0;
#X connect 17 0 13 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 12 0;
#X connect 21 0 23 0;
#X connect 21 1 22 0;
#X connect 22 0 20 0;
#X connect 23 0 24 0;
#X connect 24 0 13 0;
#X restore 191 200 pd adsr~;
#X text 51 270 makes a nicer shape...;
#X obj 236 220 t a a;
#N canvas 762 386 502 287 adsr~ 0;
#X obj 16 53 inlet _1;
#X text 16 33 note on/off - 1/0;
#X text 136 33 attack (ms);
#X text 216 33 decay (ms);
#X text 296 33 sustain gain [0-1];
#X text 416 33 release (ms);
#X obj 136 53 inlet _2;
#X obj 216 53 inlet _3;
#X obj 296 53 inlet _4;
#X obj 416 53 inlet _5;
#X obj 36 243 outlet~ _1;
#X text 36 263 gain;
#X obj 36 223 vline~;
#X obj 16 73 sel 0 1;
#X obj 16 133 f;
#X obj 16 153 t f f;
#X msg 43 173 0 \$1;
#X obj 35 93 t b b;
#X obj 95 153 pack f f f f;
#X msg 95 173 1 \$2 \, \$4 \$3 \$2;
#X text 16 13 Implementation of adsr~ using vline~;
#X connect 0 0 13 0;
#X connect 6 0 18 1;
#X connect 7 0 18 2;
#X connect 8 0 18 3;
#X connect 9 0 14 1;
#X connect 12 0 10 0;
#X connect 13 0 14 0;
#X connect 13 1 17 0;
#X connect 14 0 15 0;
#X connect 15 1 16 0;
#X connect 16 0 12 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 12 0;
#X restore 528 200 pd adsr~;
#X obj 403 280 route mute;
#X text 468 323 jmmmp: [thispoly~] isn't necessary to set busy state:
note assignment from [poly] takes care of it?;
#X msg 403 260 mute 1;
#X obj 403 240 loadbang;
#X obj 21 290 cyclone/delay~ 256 256;
#X obj 539 70 route FBAttack FBDecay FBSustain FBRelease Volume<Vel
_allnotesoff;
#X text 216 280 Mute state (1 = muted);
#X text 361 50 Amp envelope;
#X text 539 50 FM Envelope;
#X text 21 10 Prepares envelopes for note and Filter/FM. Also mute
state.;
#X text 21 390 Volume Envelope for the whole note;
#X text 528 240 FM Volume Envelope for the whole note;
#X text 403 360 busy/not busy + Voice nr;
#X obj 403 320 pack f \$1;
#X obj 403 340 s \$2-busy;
#X connect 0 0 16 0;
#X connect 3 0 11 0;
#X connect 4 0 10 0;
#X connect 10 0 26 1;
#X connect 10 1 26 2;
#X connect 10 2 26 3;
#X connect 10 3 14 1;
#X connect 10 4 35 0;
#X connect 11 0 13 0;
#X connect 11 1 12 0;
#X connect 12 0 14 0;
#X connect 13 0 26 0;
#X connect 13 1 29 0;
#X connect 14 0 26 4;
#X connect 14 1 15 0;
#X connect 15 0 26 0;
#X connect 15 1 29 0;
#X connect 16 0 17 0;
#X connect 17 0 19 0;
#X connect 18 0 17 0;
#X connect 18 1 17 1;
#X connect 19 0 20 1;
#X connect 20 0 5 0;
#X connect 22 0 34 0;
#X connect 23 0 1 0;
#X connect 24 0 43 0;
#X connect 26 0 22 0;
#X connect 26 0 22 1;
#X connect 26 1 28 0;
#X connect 28 0 23 0;
#X connect 28 1 30 0;
#X connect 29 0 6 0;
#X connect 30 0 24 0;
#X connect 32 0 30 0;
#X connect 33 0 32 0;
#X connect 34 0 20 0;
#X connect 35 0 29 1;
#X connect 35 1 29 2;
#X connect 35 2 29 3;
#X connect 35 3 29 4;
#X connect 35 4 18 0;
#X connect 35 5 14 2;
#X connect 35 6 7 0;
#X connect 43 0 44 0;
#X restore 82 220 pd Envelopes;
#X text 133 120 note on bang;
#X obj 10 240 switch~;
#X obj 10 220 == 0;
#X text 10 200 DSP on/off;
#X text 21 170 first inlet for forced note off from Position....;
#X text 31 280 grain sizes can be different for left and right;
#N canvas 240 195 771 490 Position+Scan 0;
#X obj 37 45 inlet _2;
#X obj 117 45 inlet _3;
#X text 117 25 other paramters;
#X obj 327 315 inlet _4;
#X obj 577 155 inlet _5;
#X text 27 25 pitch C3 = 0;
#X text 327 295 note on bang;
#X text 577 135 velocity scaled [-63 - 64];
#X obj 357 65 route PosEnvAmount PosEnvTime PosEnvCurve PosEnvKey PosEnvOn
PosEnvVel FileLength;
#X obj 37 65 t f f;
#X obj 17 155 *~ 0;
#X obj 117 65 route Spray FilePos FilePos<Key;
#X obj 239 95 t b f;
#X obj 239 125 * 1;
#X obj 239 145 t b f;
#X obj 178 185 + 0;
#X obj 178 215 * 0;
#X obj 289 145 t b b f f;
#X text 660 118 other paramters;
#X obj 660 98 outlet _2;
#X obj 17 255 +~ 0;
#X text 47 255 position is a function of random value \, Random Amount
and FilePos;
#X obj 459 175 expr ($f1 * $f2) + ($f3 * $f4);
#X obj 459 195 mtof 0;
#X obj 459 215 * 122.312;
#X obj 409 175 t b f;
#X obj 409 205 * 1;
#X obj 357 175 * 10000;
#X obj 327 335 cyclone/click~;
#N canvas 421 17 398 407 gen~ 0;
#X obj 16 32 inlet _1;
#X obj 126 32 inlet~ _2;
#X obj 136 222 inlet _3;
#X obj 206 222 inlet _4;
#X text 16 12 aaa;
#X text 126 12 aaa;
#X obj 16 322 outlet~ _1;
#X obj 126 52 *~ -2e+006;
#X obj 16 142 +~;
#X obj 16 162 cyclone/clip~ 0 1e+006;
#X obj 16 242 cyclone/clip~ 0 1;
#X obj 16 272 pow~ 1;
#X obj 16 302 *~ 1;
#X text 136 202 Curve;
#X text 206 202 Range;
#X obj 61 72 samplerate~;
#X obj 16 92 /~ 44100;
#X obj 61 52 loadbang;
#X obj 206 242 t f f;
#X obj 16 72 sig~;
#X obj 16 222 /~ 1;
#X text 15 372 upsampled 64x \, to simulate gen~ processing: 1 block
== 1 sample;
#X text 163 122 0-time delay replaces [history] loop.;
#X obj 36 182 delwrite~ \$0pos+scan 1;
#X obj 30 122 delread~ \$0pos+scan 0;
#X obj 118 332 r \$0-block;
#X obj 16 352 block~ 64 1 64;
#X text 184 332 xxx possÃ­vel reduzir block?;
#X connect 0 0 19 0;
#X connect 1 0 7 0;
#X connect 2 0 11 1;
#X connect 3 0 18 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 20 0;
#X connect 9 0 23 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 6 0;
#X connect 15 0 16 1;
#X connect 16 0 8 0;
#X connect 17 0 15 0;
#X connect 18 0 20 1;
#X connect 18 1 12 1;
#X connect 19 0 16 0;
#X connect 20 0 10 0;
#X connect 24 0 8 1;
#X restore 315 365 pd gen~;
#X obj 315 395 *~ 0;
#X obj 17 425 +~;
#X obj 17 445 outlet~ _1;
#X text 88 445 ms;
#X obj 17 135 receive~ \$2-posmod;
#X text 17 115 pos mod value;
#X text 47 155 spray value (ms);
#X text 316 415 Adds scan value to FilePosition;
#X text 18 464 Read position for grains;
#X text 17 5 Calculates read position for grains (optionally with scan)
;
#X connect 0 0 9 0;
#X connect 1 0 11 0;
#X connect 3 0 28 0;
#X connect 4 0 22 2;
#X connect 8 0 27 0;
#X connect 8 1 25 0;
#X connect 8 2 29 2;
#X connect 8 3 22 1;
#X connect 8 4 30 1;
#X connect 8 5 22 3;
#X connect 8 6 17 0;
#X connect 8 7 19 0;
#X connect 9 0 13 0;
#X connect 9 1 22 0;
#X connect 10 0 20 0;
#X connect 11 0 10 1;
#X connect 11 1 15 0;
#X connect 11 2 12 0;
#X connect 11 3 8 0;
#X connect 12 0 13 0;
#X connect 12 1 13 1;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 14 1 15 1;
#X connect 15 0 16 0;
#X connect 16 0 20 1;
#X connect 17 0 16 0;
#X connect 17 1 27 0;
#X connect 17 2 16 1;
#X connect 17 3 27 1;
#X connect 20 0 31 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 26 0;
#X connect 25 0 26 0;
#X connect 25 1 26 1;
#X connect 26 0 29 0;
#X connect 27 0 29 3;
#X connect 28 0 29 1;
#X connect 29 0 30 0;
#X connect 30 0 31 1;
#X connect 31 0 32 0;
#X connect 34 0 10 0;
#X restore 161 345 pd Position+Scan;
#N canvas 218 230 1109 475 Pos-LFO+Grain_Size 0;
#X obj 21 70 inlet _1;
#X obj 111 50 inlet _2;
#X obj 236 410 outlet~ _1;
#X obj 611 420 outlet~ _4;
#X obj 998 110 outlet _5;
#X text 998 130 other paramters;
#X obj 605 170 inlet _4;
#X obj 532 320 inlet~ _3;
#X obj 533 420 outlet~ _3;
#X obj 306 410 outlet~ _2;
#X text 21 50 pitch C3 = 0;
#X text 111 30 other paramters;
#X text 605 150 note on bang;
#X obj 111 70 route GrainSize Grain<Key GrainSpread Grain<LFO Grain<Rnd
;
#X obj 178 90 t b f;
#X obj 178 120 * 1;
#X obj 178 140 mtof;
#X obj 21 90 t f f;
#X obj 178 160 * 0.122312;
#X obj 178 180 t b f;
#X obj 178 210 * 1;
#X obj 111 90 t f f;
#X obj 246 90 expr 1 + ($f1*$f1*0.0001);
#X obj 246 110 t f f;
#X obj 286 230 t b f;
#X obj 286 260 * 1;
#X obj 286 280 ftom;
#X obj 246 230 t b f;
#X obj 246 260 * 1;
#X obj 246 280 ftom;
#X obj 246 210 cyclone/rdiv 1;
#X obj 178 230 t f f;
#X obj 246 300 sig~;
#X obj 246 330 +~;
#X obj 246 370 mtof~;
#X obj 296 330 +~;
#X obj 296 370 mtof~;
#X obj 286 300 sig~;
#X obj 361 270 sig~ -0.5;
#X obj 336 300 *~ 1;
#X obj 376 300 *~ 1;
#X obj 316 110 t f f;
#X obj 426 340 *~ 1;
#X obj 426 320 cyclone/rand~;
#X obj 426 300 * 8;
#X obj 584 190 gate;
#X obj 584 210 bang;
#X obj 584 230 0;
#X obj 665 210 t b f;
#X obj 665 240 * 0;
#X obj 665 270 phasor~;
#X obj 665 290 cyclone/round~;
#X obj 725 210 * 0.122312;
#X obj 725 190 mtof;
#X obj 725 140 t b f;
#X obj 725 170 * 0;
#X obj 543 380 *~ 1;
#X obj 712 380 *~ 1;
#X obj 834 330 +~ 0;
#X obj 665 70 route PosLFORate PosLFOAmount PosLFO<Key PosLFORetrigger
PosLFOPhase PosLFOQuant _Lbang;
#X obj 533 400 +~;
#X obj 611 400 +~;
#X text 21 10 Calculates grain size and position values;
#X text 236 430 Grain frequency for L and R channels;
#X text 523 440 Read position for L and R channels;
#X text 522 300 Read position in file;
#X obj 543 350 cyclone/cycle~ \$2-LFO;
#X obj 712 350 cyclone/cycle~ \$2-LFO;
#X msg 950 280 set \$1-LFO;
#X obj 950 260 \$2;
#X connect 0 0 17 0;
#X connect 1 0 13 0;
#X connect 6 0 45 1;
#X connect 7 0 60 0;
#X connect 7 0 61 0;
#X connect 13 0 21 0;
#X connect 13 1 14 0;
#X connect 13 2 22 0;
#X connect 13 3 41 0;
#X connect 13 4 42 1;
#X connect 13 5 59 0;
#X connect 14 0 15 0;
#X connect 14 1 15 1;
#X connect 15 0 16 0;
#X connect 16 0 18 0;
#X connect 17 0 15 0;
#X connect 17 1 55 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 19 1 20 1;
#X connect 20 0 31 0;
#X connect 21 0 20 0;
#X connect 21 1 44 0;
#X connect 22 0 23 0;
#X connect 23 0 30 0;
#X connect 23 1 24 0;
#X connect 24 0 25 0;
#X connect 24 1 25 1;
#X connect 25 0 26 0;
#X connect 26 0 37 0;
#X connect 27 0 28 0;
#X connect 27 1 28 1;
#X connect 28 0 29 0;
#X connect 29 0 32 0;
#X connect 30 0 27 0;
#X connect 31 0 28 0;
#X connect 31 1 25 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 2 0;
#X connect 35 0 36 0;
#X connect 36 0 9 0;
#X connect 37 0 35 0;
#X connect 38 0 39 0;
#X connect 38 0 40 0;
#X connect 39 0 33 1;
#X connect 40 0 35 1;
#X connect 41 0 39 1;
#X connect 41 1 40 1;
#X connect 42 0 36 0;
#X connect 42 0 34 0;
#X connect 43 0 42 0;
#X connect 44 0 43 0;
#X connect 45 0 46 0;
#X connect 46 0 47 0;
#X connect 47 0 50 1;
#X connect 48 0 49 0;
#X connect 48 1 49 1;
#X connect 49 0 50 0;
#X connect 50 0 51 0;
#X connect 51 0 58 0;
#X connect 51 0 66 1;
#X connect 52 0 49 0;
#X connect 53 0 52 0;
#X connect 54 0 55 0;
#X connect 54 1 55 1;
#X connect 55 0 53 0;
#X connect 56 0 60 1;
#X connect 57 0 40 0;
#X connect 57 0 61 1;
#X connect 58 0 67 1;
#X connect 59 0 48 0;
#X connect 59 1 57 1;
#X connect 59 1 56 1;
#X connect 59 2 54 0;
#X connect 59 3 45 0;
#X connect 59 4 58 1;
#X connect 59 5 51 1;
#X connect 59 6 69 0;
#X connect 59 7 4 0;
#X connect 60 0 8 0;
#X connect 61 0 3 0;
#X connect 66 0 39 0;
#X connect 66 0 56 0;
#X connect 67 0 57 0;
#X connect 68 0 66 0;
#X connect 68 0 67 0;
#X connect 69 0 68 0;
#X restore 78 385 pd Pos-LFO+Grain_Size;
#N canvas 508 139 747 477 FM+PITCH 0;
#X obj 21 50 inlet _1;
#X obj 21 350 outlet~ _1;
#X obj 440 430 outlet~ _2;
#X obj 360 40 inlet _3;
#X text 559 310 aaa;
#X obj 559 330 inlet~ _5;
#X obj 638 90 outlet _3;
#X text 360 20 velocity scaled;
#X text 21 30 other paramters;
#X text 21 10 Pitch Modulation Noise Input;
#X obj 21 130 t b f;
#X obj 21 160 + 0;
#X obj 21 210 mtof;
#X obj 21 230 * 0.122312;
#X obj 21 270 sig~;
#X obj 21 250 t f f;
#X obj 78 100 t b f;
#X obj 78 130 * 1;
#X obj 194 250 t b f;
#X obj 194 280 * 1;
#X text 205 229 velocity -63...64;
#X obj 281 70 route LFO_amt LFO_rate LFO<Key LFO<Vel LFO<AuxEnv LFOAmt<Key
;
#X obj 400 170 t b f;
#X obj 390 220 mtof;
#X obj 390 240 * 0.122312;
#X obj 370 120 inlet _4;
#X obj 370 140 t f f f;
#X obj 340 240 t b f;
#X obj 390 200 * 1;
#X obj 340 270 * 1;
#X obj 340 290 cyclone/cycle~;
#X obj 340 360 *~ 1;
#X obj 440 410 *~;
#X text 638 110 other paramters;
#X obj 578 190 t b f;
#X obj 578 240 mtof;
#X obj 578 260 * 0.122312;
#X obj 578 220 * 1;
#X obj 481 280 t b f;
#X obj 481 310 * 1;
#X obj 559 360 *~;
#X obj 519 340 t f f;
#X obj 519 360 cyclone/rminus 1;
#X obj 519 380 sig~;
#X obj 559 380 *~ 1;
#X obj 481 130 t b f;
#X obj 481 160 * 1;
#X obj 481 180 t f f;
#X obj 481 220 pow;
#X obj 451 200 loadbang;
#X obj 481 240 t f f;
#X obj 481 260 * 1;
#X obj 173 320 *~ 1;
#X obj 21 70 route Tune Tune<Key TuneSpread Tune<Rnd;
#X text 233 320 pitch mod;
#X text 440 450 FM;
#X obj 173 300 receive~ \$2-pitchmod;
#X text 370 100 pitch C3 \, 60 = 0;
#X text 31 180 Scales midi pitch into rate proportion: 60 = 1 \, 72
= 2 \, 48 = 0.5 ...;
#X text 21 370 Pitch (as rate);
#X connect 0 0 53 0;
#X connect 3 0 46 0;
#X connect 5 0 40 0;
#X connect 5 0 40 1;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 15 0;
#X connect 14 0 1 0;
#X connect 15 0 14 0;
#X connect 15 1 19 0;
#X connect 16 0 17 0;
#X connect 16 1 17 1;
#X connect 17 0 11 0;
#X connect 18 0 19 0;
#X connect 18 1 19 1;
#X connect 19 0 52 1;
#X connect 21 0 51 0;
#X connect 21 1 27 0;
#X connect 21 2 22 0;
#X connect 21 3 45 0;
#X connect 21 4 41 0;
#X connect 21 5 34 0;
#X connect 21 6 6 0;
#X connect 22 0 28 0;
#X connect 22 1 28 1;
#X connect 23 0 24 0;
#X connect 24 0 29 0;
#X connect 25 0 26 0;
#X connect 26 0 17 0;
#X connect 26 1 28 0;
#X connect 26 2 37 0;
#X connect 27 0 29 0;
#X connect 27 1 29 1;
#X connect 28 0 23 0;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 2 0;
#X connect 34 0 37 0;
#X connect 34 1 37 1;
#X connect 35 0 36 0;
#X connect 36 0 39 0;
#X connect 37 0 35 0;
#X connect 38 0 39 0;
#X connect 38 1 39 1;
#X connect 39 0 31 1;
#X connect 40 0 44 0;
#X connect 41 0 42 0;
#X connect 41 1 44 1;
#X connect 42 0 43 0;
#X connect 43 0 32 1;
#X connect 44 0 32 1;
#X connect 45 0 46 0;
#X connect 45 1 46 1;
#X connect 46 0 47 0;
#X connect 47 0 48 0;
#X connect 47 1 48 1;
#X connect 48 0 50 0;
#X connect 49 0 48 0;
#X connect 50 0 51 0;
#X connect 50 1 51 1;
#X connect 51 0 38 0;
#X connect 52 0 1 0;
#X connect 53 0 10 0;
#X connect 53 1 16 0;
#X connect 53 3 18 0;
#X connect 53 4 21 0;
#X connect 56 0 52 0;
#X restore 201 415 pd FM+PITCH;
#X obj 104 140 t b b b;
#X obj 293 510 cyclone/gate;
#X obj 293 470 == 0;
#X text 263 440 bang for reporting actual position / gain (only when
voice is active );
#X obj 112 620 throw~ \$2-outL;
#X obj 137 600 throw~ \$2-outR;
#X obj 158 80 r \$2-gran-param;
#X obj 61 50 route \$1;
#X obj 106 70 outlet;
#X obj 61 30 inlet;
#X text 284 29 parameters - id [1-20] \, \$0 identifier of parent patch
;
#N canvas 97 64 1112 634 Grains------------------ 1;
#X obj 21 550 outlet~ _1;
#X obj 661 550 outlet~ _2;
#X obj 211 50 inlet~ _4;
#X obj 21 390 inlet~ _1;
#X obj 141 50 inlet~ _3;
#X obj 281 60 inlet _5;
#X obj 420 100 inlet~ _6;
#X obj 469 190 inlet~ _7;
#X obj 1089 200 inlet~ _8;
#X obj 1191 280 inlet~ _9;
#X text 1206 450 aaa;
#X obj 1266 240 inlet _10;
#X obj 1196 470 inlet _11;
#X text 1266 220 other paramters;
#X text 56 220 volume mod;
#X obj 21 420 *~;
#X obj 21 460 *~;
#X obj 661 420 *~;
#X obj 661 460 *~;
#X obj 271 420 *~;
#X obj 271 460 *~;
#X obj 41 350 *~;
#X obj 56 270 cyclone/sah~;
#X obj 141 120 phasor~;
#X obj 211 120 phasor~;
#X obj 281 80 t b b;
#X obj 308 100 cyclone/click~;
#X obj 308 120 *~ -2;
#X msg 191 90 0.99999;
#X obj 209 240 cyclone/sah~;
#X obj 209 260 +~;
#X obj 209 300 +~;
#X obj 192 490 cyclone/snapshot~;
#X obj 62 490 cyclone/snapshot~;
#X text 1191 260 FM;
#X obj 1266 350 cyclone/prepend set;
#X text 269 220 sample new position at beginning of new window;
#X obj 311 350 *~;
#X obj 326 270 cyclone/sah~;
#X obj 469 240 cyclone/sah~;
#X obj 469 260 +~;
#X obj 469 300 +~;
#N canvas 27 187 679 470 gen-grain~------ 0;
#X obj 23 82 inlet~ _1;
#X obj 343 242 inlet~ _2;
#X obj 23 382 outlet~ _1;
#X obj 93 382 outlet~ _2;
#X obj 243 382 outlet~ _3;
#X obj 313 382 outlet~ _4;
#X obj 163 382 outlet~ _5;
#X obj 383 382 outlet~ _6;
#X obj 273 162 cyclone/delta~;
#X obj 273 132 cyclone/modulo~ 1;
#X obj 273 112 +~ 0.5;
#X obj 23 162 cyclone/delta~;
#N canvas 672 121 545 294 gen-sample~ 0;
#X obj 93 242 outlet~ _2;
#X obj 333 242 outlet~ _4;
#X obj 407 92 samplerate~;
#X obj 417 72 loadbang;
#X obj 92 172 +~;
#X obj 92 192 clip~ 0 1e+007;
#X obj 332 112 /~ 44100;
#X obj 332 172 +~;
#X obj 332 192 clip~ 0 1e+007;
#X obj 434 52 block~ 64 1 64;
#X obj 22 82 inlet~ _1;
#X obj 262 82 inlet~ _2;
#X obj 107 152 delread~ \$0graimdel1 0;
#X obj 102 212 delwrite~ \$0graimdel1 1;
#X obj 347 152 delread~ \$0graimdel2 0;
#X obj 342 212 delwrite~ \$0graimdel2 1;
#X obj 407 12 r \$0-block;
#X obj 92 112 /~ 44100;
#X obj 407 32 t b a;
#X text 95 261 Audio position for 1+2;
#X text 103 132 ??? jmp why this delay???;
#X obj 92 82 inlet~ _1;
#X obj 332 82 inlet~ _2;
#X text 23 52 Upsampled subpatch. Calculates audio position;
#X connect 2 0 6 1;
#X connect 2 0 17 1;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 0 0;
#X connect 5 0 13 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 8 0 15 0;
#X connect 10 0 4 0;
#X connect 11 0 7 0;
#X connect 12 0 4 1;
#X connect 14 0 7 1;
#X connect 16 0 18 0;
#X connect 17 0 4 0;
#X connect 18 0 2 0;
#X connect 18 1 9 0;
#X connect 21 0 17 0;
#X connect 22 0 6 0;
#X restore 152 332 pd gen-sample~;
#X text 22 32 (Patch at normal block speed \, so that delta~ works
correctly);
#X text 22 12 Calculates 2 grains with overlap for L channel;
#X text 324 222 Pitch rate - sample new pitch at beginning of new window
;
#X obj 43 272 *~ -1e+007;
#X obj 43 202 cyclone/lessthan~ 0;
#X obj 273 272 *~ -1e+007;
#X obj 273 202 cyclone/lessthan~ 0;
#X obj 123 272 cyclone/sah~;
#X obj 123 292 *~ 1000;
#X obj 343 272 cyclone/sah~;
#X obj 343 292 *~ 1000;
#X text 53 222 Samples rate at 1 from lessthan~;
#X text 43 182 Sends a 1 at the start of the window (also at sample
3);
#X text 24 62 Grain position + -2 at start of note;
#X text 294 402 Same for grain 2 (overlapping 1);
#X text 24 402 For grain 1 \; -1 at start of grain to trigger sah~s
below \; audio position \; amp envelope;
#X text 324 341 jmp *64???;
#X obj 93 362 *~ 64;
#X obj 313 362 *~ 64;
#X connect 0 0 10 0;
#X connect 0 0 6 0;
#X connect 0 0 11 0;
#X connect 1 0 20 0;
#X connect 1 0 22 0;
#X connect 8 0 4 0;
#X connect 8 0 19 0;
#X connect 9 0 7 0;
#X connect 9 0 8 0;
#X connect 10 0 9 0;
#X connect 11 0 2 0;
#X connect 11 0 17 0;
#X connect 12 0 30 0;
#X connect 12 1 31 0;
#X connect 16 0 12 0;
#X connect 17 0 16 0;
#X connect 17 0 20 1;
#X connect 18 0 12 2;
#X connect 19 0 18 0;
#X connect 19 0 22 1;
#X connect 20 0 21 0;
#X connect 21 0 12 1;
#X connect 22 0 23 0;
#X connect 23 0 12 3;
#X connect 30 0 3 0;
#X connect 31 0 5 0;
#X restore 308 160 pd gen-grain~------;
#X obj 391 520 pack;
#X obj 462 490 cyclone/snapshot~;
#X obj 332 490 cyclone/snapshot~;
#X obj 911 420 *~;
#X obj 911 460 *~;
#X obj 741 520 pack;
#X obj 661 350 *~;
#X obj 676 270 cyclone/sah~;
#X obj 819 240 cyclone/sah~;
#X obj 819 260 +~;
#X obj 819 300 +~;
#X obj 802 490 cyclone/snapshot~;
#X obj 682 490 cyclone/snapshot~;
#X obj 931 350 *~;
#X obj 946 270 cyclone/sah~;
#X obj 1089 240 cyclone/sah~;
#X obj 1089 260 +~;
#X obj 1089 300 +~;
#N canvas 578 97 448 350 gen-grain~------ 0;
#X obj 23 52 inlet~ _1;
#X obj 343 182 inlet~ _2;
#X obj 23 322 outlet~ _1;
#X obj 93 322 outlet~ _2;
#X obj 233 322 outlet~ _3;
#X obj 303 322 outlet~ _4;
#X obj 163 322 outlet~ _5;
#X obj 373 322 outlet~ _6;
#X obj 273 122 cyclone/delta~;
#X obj 273 102 cyclone/modulo~ 1;
#X obj 273 82 +~ 0.5;
#X obj 23 122 cyclone/delta~;
#X obj 303 302 *~ 64;
#X obj 93 302 *~ 64;
#X text 22 12 See other grain module for comments \; EDIT DELAYLINE
NAMES WHEN PASTING;
#N canvas 672 121 545 294 gen-sample~ 0;
#X obj 93 242 outlet~ _2;
#X obj 333 242 outlet~ _4;
#X obj 407 92 samplerate~;
#X obj 417 72 loadbang;
#X obj 92 172 +~;
#X obj 92 192 clip~ 0 1e+007;
#X obj 332 112 /~ 44100;
#X obj 332 172 +~;
#X obj 332 192 clip~ 0 1e+007;
#X obj 434 52 block~ 64 1 64;
#X obj 22 82 inlet~ _1;
#X obj 262 82 inlet~ _2;
#X obj 407 12 r \$0-block;
#X obj 92 112 /~ 44100;
#X obj 407 32 t b a;
#X obj 92 82 inlet~ _1;
#X obj 332 82 inlet~ _2;
#X text 23 52 Upsampled subpatch. Calculates audio position;
#X obj 107 152 delread~ \$0graimdel3 0;
#X obj 102 212 delwrite~ \$0graimdel3 1;
#X obj 347 152 delread~ \$0graimdel4 0;
#X obj 342 212 delwrite~ \$0graimdel4 1;
#X connect 2 0 6 1;
#X connect 2 0 13 1;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 0 0;
#X connect 5 0 19 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 8 0 21 0;
#X connect 10 0 4 0;
#X connect 11 0 7 0;
#X connect 12 0 14 0;
#X connect 13 0 4 0;
#X connect 14 0 2 0;
#X connect 14 1 9 0;
#X connect 15 0 13 0;
#X connect 16 0 6 0;
#X connect 18 0 4 1;
#X connect 20 0 7 1;
#X restore 152 272 pd gen-sample~;
#X obj 43 212 *~ -1e+007;
#X obj 43 152 cyclone/lessthan~ 0;
#X obj 273 212 *~ -1e+007;
#X obj 273 152 cyclone/lessthan~ 0;
#X obj 123 212 cyclone/sah~;
#X obj 123 232 *~ 1000;
#X obj 343 212 cyclone/sah~;
#X obj 343 232 *~ 1000;
#X connect 0 0 6 0;
#X connect 0 0 11 0;
#X connect 0 0 10 0;
#X connect 1 0 20 0;
#X connect 1 0 22 0;
#X connect 8 0 4 0;
#X connect 8 0 19 0;
#X connect 9 0 8 0;
#X connect 9 0 7 0;
#X connect 10 0 9 0;
#X connect 11 0 2 0;
#X connect 11 0 17 0;
#X connect 12 0 5 0;
#X connect 13 0 3 0;
#X connect 15 0 13 0;
#X connect 15 1 12 0;
#X connect 16 0 15 0;
#X connect 17 0 16 0;
#X connect 17 0 20 1;
#X connect 18 0 15 2;
#X connect 19 0 18 0;
#X connect 19 0 22 1;
#X connect 20 0 21 0;
#X connect 21 0 15 1;
#X connect 22 0 23 0;
#X connect 23 0 15 3;
#X restore 868 160 pd gen-grain~------;
#X obj 991 520 pack;
#X obj 1062 490 cyclone/snapshot~;
#X obj 932 490 cyclone/snapshot~;
#X text 1077 101 cycle~copies waveform in its own bufer. therefore
it has to be forced to re-read the WINDOW buffer after it has been
changed;
#X text 820 43 potentially interesting: offset the start of 2nd grain
by one grain period;
#X obj 1266 260 route AssignBuffer _Wbang blocks;
#X obj 1392 280 s \$0-block;
#X text 21 370 Vol Envelope (whole note);
#X obj 56 240 receive~ \$2-volmod;
#X text 21 10 Calculates grains;
#X text 51 30 Grain frequency for L and R channels;
#X text 281 40 note on bang;
#X text 190 70 resets phase;
#X text 32 310 Reads grain envelope;
#X text 469 170 Read position;
#X text 1089 180 Read position;
#X text 232 300 Read audio buffer;
#X text 420 80 Pitch rate - sample new pitch at beginning of new window
;
#X obj 121 550 s \$2-dispPA;
#X obj 121 520 pack f f \$1;
#X text 152 570 Display of position and amplitude \; jmp only the first
grain of L channel is being shown (for optimization). Added voice ID.
;
#X obj 209 370 cyclone/play~ \$2-BUFFER;
#X obj 469 370 cyclone/play~ \$2-BUFFER;
#X obj 819 370 cyclone/play~ \$2-BUFFER-2;
#X obj 1089 370 cyclone/play~ \$2-BUFFER-2;
#X obj 41 330 cyclone/cycle~ \$2-WINDOW;
#X obj 311 330 cyclone/cycle~ \$2-WINDOW;
#X obj 661 330 cyclone/cycle~ \$2-WINDOW;
#X obj 931 330 cyclone/cycle~ \$2-WINDOW;
#X msg 1329 310 set \$1-WINDOW;
#X obj 1329 290 \$2;
#X connect 2 0 24 0;
#X connect 3 0 15 0;
#X connect 3 0 17 0;
#X connect 3 0 19 0;
#X connect 3 0 46 0;
#X connect 4 0 23 0;
#X connect 5 0 25 0;
#X connect 6 0 42 1;
#X connect 6 0 61 1;
#X connect 7 0 29 0;
#X connect 7 0 39 0;
#X connect 8 0 58 0;
#X connect 8 0 51 0;
#X connect 9 0 31 1;
#X connect 9 0 41 1;
#X connect 9 0 60 1;
#X connect 9 0 53 1;
#X connect 11 0 67 0;
#X connect 12 0 63 0;
#X connect 12 0 64 0;
#X connect 12 0 54 0;
#X connect 12 0 55 0;
#X connect 12 0 44 0;
#X connect 12 0 45 0;
#X connect 12 0 32 0;
#X connect 12 0 33 0;
#X connect 15 0 16 0;
#X connect 15 0 33 0;
#X connect 16 0 0 0;
#X connect 17 0 18 0;
#X connect 17 0 55 0;
#X connect 18 0 1 0;
#X connect 19 0 20 0;
#X connect 19 0 45 0;
#X connect 20 0 0 0;
#X connect 21 0 15 1;
#X connect 22 0 21 1;
#X connect 23 0 42 0;
#X connect 24 0 61 0;
#X connect 25 0 28 0;
#X connect 25 1 26 0;
#X connect 26 0 27 0;
#X connect 27 0 42 0;
#X connect 27 0 61 0;
#X connect 28 0 23 1;
#X connect 28 0 24 1;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 30 0 32 0;
#X connect 31 0 83 0;
#X connect 32 0 81 0;
#X connect 33 0 81 1;
#X connect 35 0 85 0;
#X connect 35 0 86 0;
#X connect 37 0 19 1;
#X connect 38 0 37 1;
#X connect 39 0 40 0;
#X connect 40 0 41 0;
#X connect 40 0 44 0;
#X connect 41 0 84 0;
#X connect 42 0 22 1;
#X connect 42 0 29 1;
#X connect 42 1 30 1;
#X connect 42 2 87 1;
#X connect 42 3 38 1;
#X connect 42 3 39 1;
#X connect 42 4 40 1;
#X connect 42 5 88 1;
#X connect 44 0 43 0;
#X connect 45 0 43 1;
#X connect 46 0 47 0;
#X connect 46 0 64 0;
#X connect 47 0 1 0;
#X connect 49 0 17 1;
#X connect 50 0 49 1;
#X connect 51 0 52 0;
#X connect 52 0 53 0;
#X connect 52 0 54 0;
#X connect 53 0 85 0;
#X connect 54 0 48 0;
#X connect 55 0 48 1;
#X connect 56 0 46 1;
#X connect 57 0 56 1;
#X connect 58 0 59 0;
#X connect 59 0 60 0;
#X connect 59 0 63 0;
#X connect 60 0 86 0;
#X connect 61 0 50 1;
#X connect 61 0 51 1;
#X connect 61 1 52 1;
#X connect 61 2 89 1;
#X connect 61 3 57 1;
#X connect 61 3 58 1;
#X connect 61 4 59 1;
#X connect 61 5 90 1;
#X connect 63 0 62 0;
#X connect 64 0 62 1;
#X connect 67 0 35 0;
#X connect 67 1 92 0;
#X connect 67 2 68 0;
#X connect 70 0 22 0;
#X connect 70 0 38 0;
#X connect 70 0 50 0;
#X connect 70 0 57 0;
#X connect 81 0 80 0;
#X connect 83 0 16 1;
#X connect 84 0 20 1;
#X connect 85 0 18 1;
#X connect 86 0 47 1;
#X connect 87 0 21 0;
#X connect 88 0 37 0;
#X connect 89 0 49 0;
#X connect 90 0 56 0;
#X connect 91 0 87 0;
#X connect 91 0 88 0;
#X connect 91 0 89 0;
#X connect 91 0 90 0;
#X connect 92 0 91 0;
#X restore 152 530 pd Grains------------------;
#X obj 362 490 r \$2-draw-snapshot;
#X text 365 470 Bangs to get grain position + amplitudes;
#X obj 314 135 s \$0-notebang;
#X text 311 114 jmp for debugging with tabletest~ \, delete aftewards
;
#X connect 2 0 4 0;
#X connect 2 1 3 0;
#X connect 2 2 6 0;
#X connect 2 2 17 0;
#X connect 2 2 31 0;
#X connect 2 3 7 1;
#X connect 2 4 7 2;
#X connect 3 0 7 0;
#X connect 3 1 14 3;
#X connect 3 2 16 1;
#X connect 3 3 5 1;
#X connect 4 0 14 0;
#X connect 4 1 15 0;
#X connect 4 2 16 2;
#X connect 4 3 5 0;
#X connect 5 0 21 0;
#X connect 5 1 22 0;
#X connect 5 2 28 9;
#X connect 7 0 28 0;
#X connect 7 1 19 0;
#X connect 7 1 10 0;
#X connect 7 2 16 3;
#X connect 7 2 5 3;
#X connect 7 3 14 1;
#X connect 10 0 9 0;
#X connect 14 0 15 2;
#X connect 14 1 15 1;
#X connect 15 0 28 1;
#X connect 15 1 28 2;
#X connect 15 2 28 5;
#X connect 15 3 28 6;
#X connect 15 4 16 0;
#X connect 16 0 28 4;
#X connect 16 1 28 7;
#X connect 16 2 5 2;
#X connect 17 0 14 2;
#X connect 17 1 15 3;
#X connect 17 2 28 3;
#X connect 18 0 28 8;
#X connect 19 0 18 0;
#X connect 23 0 2 1;
#X connect 24 0 2 0;
#X connect 24 1 25 0;
#X connect 26 0 24 0;
#X connect 28 0 5 4;
#X connect 28 1 5 5;
#X connect 29 0 18 1;
